# Brain WM Lesion/ROI Segmentation QC

The Brain WM Lesion/ROI Segmentation QC Shiny App is a collaborative tool designed to facilitate the evaluation of white matter lesion masks generated by segmentation algorithms like MIMoSA, brain ROI masks generated by JLF and FreeSurfer, as well as lesion center masks for CVS score calculation and PRL lesion masks for PRL score calculation. It provides a user-friendly interface where multiple users can collectively assess segmentation quality through interactive features.

![demo](/pipelines/BrainQC/figure/WM%20Lesion%20QC.gif)

## Key Features
**Subject Evaluation**: Users can select pass or fail for each subject's lesion/roi segmentation, enabling efficient evaluation of segmentation quality.

**Interactive Interface**: The app offers an intuitive and interactive interface for seamless navigation and evaluation.

**Automated Recording**: Evaluation results are automatically recorded in an Excel file, ensuring accurate and efficient documentation of assessment outcomes.

**Additional Notes**: Users have the option to include additional notes during the evaluation process, providing flexibility and context to the assessment.

## Code Example

### Data Structure

![data structure](/pipelines/BrainQC/figure/sample_data.png)

**Stage I: Prepare for QC results**
```bash
Rscript ./PennSIVE_neuro_pip/pipelines/QC_design/QC_CLI.R -p ./tmp -f flair_ws.nii.gz -m mimosa_binary_mask_0.25.nii.gz -o /path/to/qc/result.rds -a ./PennSIVE_neuro_pip/pipelines/QC_design
```

**Stage II: Interactive Evaluation**
```bash
Rscript ./PennSIVE_neuro_pip/pipelines/QC_design/QC_CLI.R -p /path/to/qc -s qc -a ./PennSIVE_neuro_pip/pipelines/QC_design
```
